"use strict";(self.webpackChunkadguard_dns_knowledge_base=self.webpackChunkadguard_dns_knowledge_base||[]).push([[588],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),o=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=o(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=o(n),c=l,k=d["".concat(s,".").concat(c)]||d[c]||m[c]||r;return n?a.createElement(k,i(i({ref:t},u),{},{components:n})):a.createElement(k,i({ref:t},u))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var o=2;o<r;o++)i[o]=n[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1964:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return p},metadata:function(){return o},toc:function(){return m}});var a=n(3117),l=n(102),r=(n(7294),n(4137)),i=["components"],p={title:"Syntaxe des r\xe8gles de filtrage DNS",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},s=void 0,o={unversionedId:"general/dns-filtering-syntax",id:"general/dns-filtering-syntax",title:"Syntaxe des r\xe8gles de filtrage DNS",description:"Nous vous montrons ici comment \xe9crire des r\xe8gles de filtrage DNS personnalis\xe9es \xe0 utiliser dans les produits AdGuard",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/general/dns-filtering-syntax.md",sourceDirName:"general",slug:"/general/dns-filtering-syntax",permalink:"/KnowledgeBaseDNS/fr/general/dns-filtering-syntax",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBaseDNS/edit/master/docs/general/dns-filtering-syntax.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Syntaxe des r\xe8gles de filtrage DNS",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:4},sidebar:"sidebar",previous:{title:"Filtrage DNS",permalink:"/KnowledgeBaseDNS/fr/general/dns-filtering"},next:{title:"Fournisseurs de DNS connus",permalink:"/KnowledgeBaseDNS/fr/general/dns-providers"}},u={},m=[{value:"Introduction",id:"introduction",level:2},{value:"Exemples de base",id:"exemples-de-base",level:2},{value:"Caract\xe8res sp\xe9ciaux",id:"caract\xe8res-sp\xe9ciaux",level:3},{value:"Expressions r\xe9guli\xe8res",id:"expressions-r\xe9guli\xe8res",level:3},{value:"Commentaires",id:"commentaires",level:3},{value:"Modificateurs de r\xe8gles",id:"modificateurs-de-r\xe8gles",level:3},{value:"<code>client</code>",id:"client",level:4},{value:"<code>denyallow</code>",id:"denyallow",level:4},{value:"<code>dnstype</code>",id:"dnstype",level:4},{value:"<code>dnsrewrite</code>",id:"dnsrewrite",level:4},{value:"<code>important</code>",id:"important",level:4},{value:"<code>badfilter</code>",id:"badfilter",level:4},{value:"<code>ctag</code>",id:"ctag",level:4},{value:"<code>/etc/hosts</code>-Style Syntaxe",id:"etc-hosts-syntax",level:2},{value:"Syntaxe pour les domaines uniquement",id:"syntaxe-pour-les-domaines-uniquement",level:2},{value:"Compilateur de listes d&#39;h\xf4tes",id:"compilateur-de-listes-dh\xf4tes",level:2}],d={toc:m};function c(e){var t=e.components,n=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Nous vous montrons ici comment \xe9crire des r\xe8gles de filtrage DNS personnalis\xe9es \xe0 utiliser dans les produits AdGuard"),(0,r.kt)("p",{parentName:"div"},"Liens rapides : ",(0,r.kt)("a",{parentName:"p",href:"https://adguard.com/download.html?auto=true&utm_source=kb_dns"},"T\xe9l\xe9charger le Bloqueur AdGuard"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardHome#getting-started"},"Obtenir AdGuard Home"),", ",(0,r.kt)("a",{parentName:"p",href:"https://adguard-dns.io/dashboard/"},"Essayer AdGuard DNS")))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Vous pouvez utiliser la syntaxe de r\xe8gles de filtrage DNS AdGuard pour rendre les r\xe8gles plus flexibles, pour qu\u2019elles puissent bloquer le contenu selon vos pr\xe9f\xe9rences. La syntaxe des r\xe8gles de filtrage DNS AdGuard peut \xeatre utilis\xe9e dans des produits AdGuard diff\xe9rents, tels que AdGuard Home, AdGuard DNS, AdGuard pour Windows/Mac/Android."),(0,r.kt)("p",null,"Il y existe trois approches diff\xe9rentes pour \xe9crire des listes de blocage d\u2019h\xf4tes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"Syntaxe de style Adblock"),": l'approche moderne de l'\xe9criture de r\xe8gles de filtrage bas\xe9e sur l'utilisation d'un sous-ensemble de la syntaxe de r\xe8gle de style Adblock. De cette fa\xe7on, les listes de blocage sont compatibles avec les bloqueurs de publicit\xe9s du navigateur.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#etc-hosts-syntax"},(0,r.kt)("inlineCode",{parentName:"a"},"/etc/hosts")," syntaxe"),": la vieille approche \xe9prouv\xe9e qui utilise la m\xeame syntaxe que les syst\xe8mes d'exploitation pour leurs fichiers hosts.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#domains-only-syntax"},"Domains-only syntax"),": une simple liste de noms de domaine."))),(0,r.kt)("p",null,"Si vous cr\xe9ez une liste de blocage, nous vous recommandons d'utiliser la ",(0,r.kt)("a",{parentName:"p",href:"#adblock-style-syntax"},"syntaxe de type Adblock"),". Elle pr\xe9sente quelques avantages importants par rapport \xe0 l\u2019ancienne syntaxe :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Taille des listes de blocage.")," L'utilisation de la correspondance de mod\xe8les vous permet d'avoir une seule r\xe8gle au lieu de centaines d'entr\xe9es ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Compatibilit\xe9.")," Votre liste de blocage sera compatible avec les bloqueurs de publicit\xe9 des navigateurs et il sera plus facile de partager des r\xe8gles avec une liste de filtrage des navigateurs.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Extensibilit\xe9.")," Au cours de la derni\xe8re d\xe9cennie, la syntaxe de style Adblock a beaucoup \xe9volu\xe9, et nous ne voyons aucune raison de ne pas l\u2019\xe9tendre encore plus loin et d\u2019offrir des fonctionnalit\xe9s suppl\xe9mentaires pour les bloqueurs au niveau du r\xe9seau."))),(0,r.kt)("p",null,"Si vous maintenez une liste de blocage de style ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),"ou plusieurs listes de filtrage (quel que soit le type), nous fournissons un outil pour la compilation de listes de blocage. Nous l'avons nomm\xe9 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"},"Hostlist compiler")," et nous l'utilisons nous-m\xeames pour cr\xe9er le ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/AdGuardSDNSFilter"},"Filtre AdGuard DNS"),"."),(0,r.kt)("h2",{id:"exemples-de-base"},"Exemples de base"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^"),": bloque l'acc\xe8s au domaine ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," et \xe0 tous ses sous-domaines, comme ",(0,r.kt)("inlineCode",{parentName:"p"},"www.example.org"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),": d\xe9bloque l'acc\xe8s au domaine ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," et \xe0 tous ses sous-domaines.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4 example.org"),": (attention, ancienne ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/hosts")," -syntaxe) dans AdGuard Home, r\xe9ponse avec ",(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," aux requ\xeates pour ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," domaine mais ",(0,r.kt)("strong",{parentName:"p"},"pas")," ses sous-domaines. Dans AdGuard DNS Priv\xe9, bloque l'acc\xe8s \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"www.example.org")," reste autoris\xe9."),(0,r.kt)("p",{parentName:"li"},"Dans AdGuard Home, utiliser l\u2019adresse IP non sp\xe9cifi\xe9e (",(0,r.kt)("inlineCode",{parentName:"p"},"0.0.0.0"),") ou une adresse locale (",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," et les m\xeames) pour un h\xf4te est fondamentalement la m\xeame chose que de bloquer cet h\xf4te."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none"},"# Retourne l\u2019adresse IP 1.2.3.4 par exemple.\n1.2.3.4 example.org\n")))),(0,r.kt)("h1",{id:"bloque-exampleorg-en-r\xe9pondant-avec-0000"},"Bloque example.org en r\xe9pondant avec 0.0.0.0."),(0,r.kt)("p",null,"  0.0.0.0 example.org"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\n- `example.org`: une r\xe8gle de domaine simple. Bloque le domaine `example.org` mais **pas** ses sous-domaines. `www.example.org` reste autoris\xe9.\n\n- `! Voici un commentaire ` et `# aussi un commentaire `: Comments.\n\n- `/REGEX/`: bloquez l\u2019acc\xe8s aux domaines correspondant \xe0 l\u2019expression r\xe9guli\xe8re sp\xe9cifi\xe9e.\n\n## Syntaxe de style Adblock\n\nIl s\'agit d\'un sous-ensemble de la [ syntaxe traditionnelle du style Adblock][adb] qui est utilis\xe9e par les bloqueurs de publicit\xe9s dans les navigateurs.\n\n```none\n   r\xe8gle = ["@@"] mod\xe8le [" $" modificateurs]\nModificateurs = [modier0, modier1 [, \u2026 [, modifi\xe9]]]\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"pattern"),": le masque de nom d\u2019h\xf4te. Chaque nom d'h\xf4te est compar\xe9 \xe0 ce masque. Le mod\xe8le peut \xe9galement contenir des caract\xe8res sp\xe9ciaux, qui sont d\xe9crits ci-dessous.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@"),": le marqueur utilis\xe9 dans les r\xe8gles d\u2019exception. Commencez votre r\xe8gle avec ce marqueur si vous voulez arr\xeater le filtrage pour les noms d\u2019h\xf4tes correspondants.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"modificateurs"),": param\xe8tres qui clarifient la r\xe8gle. Ils peuvent limiter la port\xe9e de la r\xe8gle ou m\xeame modifier compl\xe8tement son fonctionnement."))),(0,r.kt)("h3",{id:"caract\xe8res-sp\xe9ciaux"},"Caract\xe8res sp\xe9ciaux"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"*"),": le caract\xe8re g\xe9n\xe9rique. Il est utilis\xe9 pour repr\xe9senter n\u2019importe quel ensemble de caract\xe8res. Cela peut aussi \xeatre une cha\xeene vide ou une cha\xeene de n\u2019importe quelle longueur.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||"),": correspond au d\xe9but d\u2019un nom d\u2019h\xf4te, y compris un sous-domaine. Par exemple, ",(0,r.kt)("inlineCode",{parentName:"p"},"||example.org")," correspond \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"test.example.org")," mais pas ",(0,r.kt)("inlineCode",{parentName:"p"},"testexample.org"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"^"),": le caract\xe8re s\xe9parateur. Contrairement au blocage des publicit\xe9s en navigateur, il n'y a rien \xe0 s\xe9parer dans un nom d'h\xf4te, donc le seul but de ce caract\xe8re est de marquer la fin du nom d'h\xf4te.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"|"),": un pointeur vers le d\xe9but ou la fin du nom d'h\xf4te. La valeur d\xe9pend du placement des caract\xe8res dans le masque. Par exemple, la r\xe8gle ",(0,r.kt)("inlineCode",{parentName:"p"},"ample.org|")," correspond \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," mais pas \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org.com"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"|exemple")," correspond \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"exemple.org")," mais pas \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"test.exemple"),"."))),(0,r.kt)("h3",{id:"expressions-r\xe9guli\xe8res"},"Expressions r\xe9guli\xe8res"),(0,r.kt)("p",null,"Si vous souhaitez b\xe9n\xe9ficier d'une plus grande souplesse dans l'\xe9laboration des r\xe8gles, vous pouvez utiliser les ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions"},"expressions r\xe9guli\xe8res")," au lieu de la syntaxe correspondante simplifi\xe9e par d\xe9faut. Si vous souhaitez utiliser une expression r\xe9guli\xe8re, le mod\xe8le doit ressembler \xe0 ceci\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},'mod\xe8le = "/" regexp "/"\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"/exemple.*/")," bloquera les h\xf4tes correspondant \xe0 l'",(0,r.kt)("inlineCode",{parentName:"p"},"exemple*")," regexp.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@/exemple.*/$important")," d\xe9bloquera les h\xf4tes correspondant \xe0 l'",(0,r.kt)("inlineCode",{parentName:"p"},"exemple*")," regexp. Notez que cette r\xe8gle implique \xe9galement le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"important"),"."))),(0,r.kt)("h3",{id:"commentaires"},"Commentaires"),(0,r.kt)("p",null,"Toute ligne commen\xe7ant par un point d'exclamation ou un di\xe8se est un commentaire et sera ignor\xe9e par le moteur de filtrage. Les commentaires sont g\xe9n\xe9ralement plac\xe9s au-dessus des r\xe8gles et utilis\xe9s pour d\xe9crire ce que fait une r\xe8gle."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"! Ceci est un commentaire.\n# Ceci est aussi un commentaire.\n")),(0,r.kt)("h3",{id:"modificateurs-de-r\xe8gles"},"Modificateurs de r\xe8gles"),(0,r.kt)("p",null,"Vous pouvez modifier le comportement d'une r\xe8gle en ajoutant des modificateurs. Les modificateurs doivent \xeatre situ\xe9s \xe0 la fin de la r\xe8gle apr\xe8s le caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},"$")," et \xeatre s\xe9par\xe9s par des virgules."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none",metastring:"||example.org^$important","||example.org^$important":!0},"")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^")," est le mod\xe8le correspondant. ",(0,r.kt)("inlineCode",{parentName:"p"},"$")," est le d\xe9limiteur, qui signale que le reste de la r\xe8gle sont des modificateurs. ",(0,r.kt)("inlineCode",{parentName:"p"},"important")," est le modificateur.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Vous pouvez utiliser plusieurs modificateurs dans une r\xe8gle. Dans ce cas, s\xe9parez-les par des virgules :"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$client=127.0.0.1,dnstype=A\n")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^")," est le mod\xe8le correspondant. ",(0,r.kt)("inlineCode",{parentName:"p"},"$")," est le d\xe9limiteur, qui signale que le reste de la r\xe8gle sont des modificateurs. ",(0,r.kt)("inlineCode",{parentName:"p"},"client=127.0.0.1")," est le modificateur ",(0,r.kt)("a",{parentName:"p",href:"#client"},(0,r.kt)("inlineCode",{parentName:"a"},"client"))," avec sa valeur, ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),", est le d\xe9limiteur. Et enfin, ",(0,r.kt)("inlineCode",{parentName:"p"},"dnstype=A")," est le modificateur ",(0,r.kt)("a",{parentName:"p",href:"#dnstype"},(0,r.kt)("inlineCode",{parentName:"a"},"dnstype"))," avec sa valeur, ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"ATTENTION :")," Si une r\xe8gle contient un modificateur non r\xe9pertori\xe9 dans ce document, toute la r\xe8gle ",(0,r.kt)("strong",{parentName:"p"},"doit \xeatre ignor\xe9e"),". De cette fa\xe7on, nous \xe9vitons les faux positifs lorsque les gens essaient d'utiliser les listes de filtres des bloqueurs de publicit\xe9s de navigateur non modifi\xe9s comme EasyList ou EasyPrivacy."),(0,r.kt)("h4",{id:"client"},(0,r.kt)("inlineCode",{parentName:"h4"},"client")),(0,r.kt)("p",null,"Le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"client")," permet de sp\xe9cifier les clients auxquels cette r\xe8gle s'applique. Il existe deux fa\xe7ons principales d'identifier un client\xa0:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Par leur adresse IP ou leur pr\xe9fixe CIDR. Cette m\xe9thode fonctionne pour tous les types de clients.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Par leur nom. Cette m\xe9thode ne fonctionne que pour les clients persistants (dans AdGuard Home) et les appareils (dans AdGuard DNS Priv\xe9), que vous avez ajout\xe9s manuellement."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"REMARQUE\xa0:"),' Dans AdGuard Home, les ID client ne sont actuellement pas pris en charge, seuls les noms le sont. Si vous avez ajout\xe9 un client portant le nom "My client" et le num\xe9ro de client ',(0,r.kt)("inlineCode",{parentName:"p"},"my-client")," , \xe9crivez votre modificateur sous la forme ",(0,r.kt)("inlineCode",{parentName:"p"},"$client='My Client'")," au lieu de ",(0,r.kt)("inlineCode",{parentName:"p"},"$client=my-client"),"."))),(0,r.kt)("p",null,"La syntaxe est :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$client=value1|value2|...\n")),(0,r.kt)("p",null,"Vous pouvez \xe9galement exclure des clients en ajoutant un caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},"~")," avant la valeur. Dans ce cas, la r\xe8gle n'est pas appliqu\xe9e aux requ\xeates DNS de ce client."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$client=~value1\n")),(0,r.kt)("p",null,"Les noms de client contiennent g\xe9n\xe9ralement des espaces ou d'autres caract\xe8res sp\xe9ciaux, c'est pourquoi vous devez placer le nom entre guillemets. Les guillemets ASCII simples et doubles sont pris en charge. Utilisez la barre oblique inverse (",(0,r.kt)("inlineCode",{parentName:"p"},"\\"),") pour \xe9chapper les guillemets (",(0,r.kt)("inlineCode",{parentName:"p"},'"')," et ",(0,r.kt)("inlineCode",{parentName:"p"},"'"),"), les virgules (",(0,r.kt)("inlineCode",{parentName:"p"},","),") et les barres verticales (",(0,r.kt)("inlineCode",{parentName:"p"},"|"),")."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"REMARQUE :")," Lorsque vous excluez un client, vous ",(0,r.kt)("strong",{parentName:"p"},"devez")," placer ",(0,r.kt)("inlineCode",{parentName:"p"},"~")," en dehors des guillemets."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@||*^$client=127.0.0.1"),": d\xe9bloquer tout pour localhost.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$client='Frank\\'s laptop'"),": bloque ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," pour le client nomm\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"Frank's laptop")," uniquement. Notez que les guillemets (",(0,r.kt)("inlineCode",{parentName:"p"},"'"),") dans le nom doivent \xeatre \xe9chapp\xe9s.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~'Mary\\'s\\, John\\'s\\, and Boris\\'s laptops'"),"\xa0: bloc ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," pour tout le monde sauf le client nomm\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"Mary's, John's, and Boris's laptops"),". Notez que la virgule (",(0,r.kt)("inlineCode",{parentName:"p"},","),") doit \xe9galement \xeatre \xe9chapp\xe9e.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$client=~Mom|~Dad|Kids"),": bloquer ",(0,r.kt)("inlineCode",{parentName:"p"},"exemple.org")," pour ",(0,r.kt)("inlineCode",{parentName:"p"},"Kids"),", mais pas pour ",(0,r.kt)("inlineCode",{parentName:"p"},"Mom")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"Dad"),". Cet exemple montre comment sp\xe9cifier plusieurs clients dans une r\xe8gle.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$client=192.168.0.0/24"),": bloquer ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," pour tous les clients dont les adresses IP sont comprises entre ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.0")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"192.168.0.255"),"."))),(0,r.kt)("h4",{id:"denyallow"},(0,r.kt)("inlineCode",{parentName:"h4"},"denyallow")),(0,r.kt)("p",null,"Vous pouvez utiliser le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"denyallow")," pour exclure des domaines de la r\xe8gle de blocage. Pour ajouter plusieurs domaines \xe0 une r\xe8gle, utilisez le ",(0,r.kt)("inlineCode",{parentName:"p"},"|")," caract\xe8re comme s\xe9parateur."),(0,r.kt)("p",null,"La syntaxe est :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$denyallow=domain1|domain2|...\n")),(0,r.kt)("p",null,"Ce modificateur permet d'\xe9viter de cr\xe9er des r\xe8gles d'exception inutiles quand notre r\xe8gle de blocage couvre trop de domaines. Vous voudrez peut-\xeatre tout bloquer sauf quelques domaines TLD. Vous pouvez utiliser l'approche standard, c'est-\xe0-dire des r\xe8gles comme celle-ci\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"! Bloquer tout.\n/.*/\n\n! D\xe9bloquer quelques TLD.\n@@||com^\n@@||net^\n")),(0,r.kt)("p",null,"Le probl\xe8me avec cette approche est que de cette fa\xe7on, vous d\xe9bloquerez \xe9galement les domaines de suivi situ\xe9s sur ces TLD (c'est-\xe0-dire ",(0,r.kt)("inlineCode",{parentName:"p"},"google-analytics.com"),"). Voici comment r\xe9soudre ce probl\xe8me avec ",(0,r.kt)("inlineCode",{parentName:"p"},"denyallow")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"*$denyallow=com|net\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"*$denyallow=com|net"),": bloque tout sauf ",(0,r.kt)("inlineCode",{parentName:"p"},"*.com")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@*$denyallow=com|net"),": d\xe9bloque tout sauf ",(0,r.kt)("inlineCode",{parentName:"p"},"*.com")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"*.net"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$denyallow=sub.example.org"),". bloque ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"*.example.org")," mais ne bloque pas ",(0,r.kt)("inlineCode",{parentName:"p"},"sub.example.org"),"."))),(0,r.kt)("h4",{id:"dnstype"},(0,r.kt)("inlineCode",{parentName:"h4"},"dnstype")),(0,r.kt)("p",null,"Le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"dnstype")," permet de sp\xe9cifier le type de requ\xeate ou de r\xe9ponse DNS sur lequel cette r\xe8gle sera d\xe9clench\xe9e."),(0,r.kt)("p",null,"La syntaxe est :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value1|value2|...\n$dnstype=~value1|~value2|~...\n")),(0,r.kt)("p",null,"Les noms des types ne sont pas sensibles \xe0 la casse, mais sont valid\xe9s par rapport \xe0 un ensemble de types d'enregistrements de ressources DNS (RR) r\xe9els."),(0,r.kt)("p",null,"Ne combinez pas les r\xe8gles d'exclusion avec celles d'inclusion. Ceci :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=~value1|value2\n")),(0,r.kt)("p",null,"est \xe9quivalent \xe0 ceci :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$dnstype=value2\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=AAAA"),": bloque les requ\xeates DNS pour les adresses IPv6 de ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$dnstype=~A|~CNAME"),": n'autorise que les requ\xeates DNS du type ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"CNAME")," pour ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org"),", et bloque le reste."))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"ATTENTION :")," Avant la version ",(0,r.kt)("strong",{parentName:"p"},"v0.108.0,")," AdGuard Home utilisait le type de requ\xeate pour filtrer les enregistrements de r\xe9ponse, par opposition au type de l'enregistrement de r\xe9ponse lui-m\xeame.  Cela posait des probl\xe8mes, puisque dans ce cas-l\xe0 vous ne pouviez pas \xe9crire de r\xe8gles autorisant certains enregistrements ",(0,r.kt)("inlineCode",{parentName:"p"},"CNAME")," dans les r\xe9ponses aux requ\xeates ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"AAAA")," . Dans ",(0,r.kt)("strong",{parentName:"p"},"v0.108.0")," ce comportement a \xe9t\xe9 modifi\xe9, alors maintenant ceci\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||canon.example.com^$dnstype=~CNAME\n")),(0,r.kt)("p",null,"permet d'\xe9viter le filtrage de la r\xe9ponse suivante\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"REPONSES :\n->  example.com\n    canonical name = canon.example.com.\n    ttl = 60\n->  canon.example.com\n    internet address = 1.2.3.4\n    ttl = 60\n")),(0,r.kt)("h4",{id:"dnsrewrite"},(0,r.kt)("inlineCode",{parentName:"h4"},"dnsrewrite")),(0,r.kt)("p",null,"Le modificateur de r\xe9ponse ",(0,r.kt)("inlineCode",{parentName:"p"},"dnsrewrite")," permet de remplacer le contenu de la r\xe9ponse \xe0 la requ\xeate DNS pour les h\xf4tes correspondants. Tenez compte que ce modificateur dans AdGuard Home fonctionne dans toutes les r\xe8gles, mais dans AdGuard DNS Priv\xe9 - uniquement dans les r\xe8gles personnalis\xe9es."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Les r\xe8gles avec le modificateur de r\xe9ponse ",(0,r.kt)("inlineCode",{parentName:"strong"},"dnsrewrite")," ont une priorit\xe9 plus \xe9lev\xe9e que les autres r\xe8gles dans AdGuard Home.")),(0,r.kt)("p",null,"La syntaxe abr\xe9g\xe9e est la suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=1.2.3.4\n$dnsrewrite=abcd::1234\n$dnsrewrite=example.net\n$dnsrewrite=REFUSED\n")),(0,r.kt)("p",null,"Les mots cl\xe9s DOIVENT \xeatre en majuscules (par exemple ",(0,r.kt)("inlineCode",{parentName:"p"},"NOERROR"),"). Les r\xe9\xe9critures de mots-cl\xe9s ont priorit\xe9 sur les autres et donneront une r\xe9ponse vide avec un code de r\xe9ponse appropri\xe9."),(0,r.kt)("p",null,"La syntaxe compl\xe8te est de la forme ",(0,r.kt)("inlineCode",{parentName:"p"},"RCODE;RRTYPE;VALUE"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$dnsrewrite=NOERROR;A;1.2.3.4\n$dnsrewrite=NOERROR;AAAA;abcd::1234\n$dnsrewrite=NOERROR;CNAME;example.net\n$dnsrewrite=REFUSED;;\n")),(0,r.kt)("p",null,"Le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"$dnsrewrite")," avec le code de r\xe9ponse ",(0,r.kt)("inlineCode",{parentName:"p"},"NOERROR")," peut \xe9galement avoir des champs ",(0,r.kt)("inlineCode",{parentName:"p"},"RRTYPE")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"VALUE")," vides."),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"CNAME")," est sp\xe9cial, car AdGuard Home r\xe9soudra l'h\xf4te et ajoutera ses informations \xe0 la r\xe9ponse. Autrement dit, si ",(0,r.kt)("inlineCode",{parentName:"p"},"example.net")," a l'IP ",(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),"et l'utilisateur a ceci dans ses r\xe8gles de filtrage\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||example.com^$dnsrewrite=example.net\n! Soit :\n||example.com^$dnsrewrite=NOERROR;CNAME;example.net\n")),(0,r.kt)("p",null,"alors la r\xe9ponse sera de cette sorte :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"nslookup example.com my.adguard.local\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"Serveur : my.adguard.local\nAdresse : 127.0.0.1#53\n\nR\xe9ponse non officielle :\nexemple.com canonical name = exemple.net.\nNom\xa0: example.net\nAdresse\xa0: 1.2.3.4\n")),(0,r.kt)("p",null,"Ensuite, la r\xe9\xe9criture ",(0,r.kt)("inlineCode",{parentName:"p"},"CNAME"),". Apr\xe8s cela, les valeurs de tous les autres enregistrements sont additionn\xe9es en une seule r\xe9ponse, donc ceci\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||example.com^$dnsrewrite=NOERROR;A;1.2.3.4\n||example.com^$dnsrewrite=NOERROR;A;1.2.3.5\n")),(0,r.kt)("p",null,"entra\xeenera une r\xe9ponse avec deux enregistrements ",(0,r.kt)("inlineCode",{parentName:"p"},"A"),"."),(0,r.kt)("p",null,"Types de RR actuellement pris en charge avec des exemples\xa0:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||4.3.2.1.in-addr.arpa^$dnsrewrite=NOERROR;PTR;example.net.")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"PTR"),"pour le DNS inverse. Les requ\xeates DNS invers\xe9es pour ",(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," au serveur DNS donneront ",(0,r.kt)("inlineCode",{parentName:"p"},"example.net"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"ATTENTION :")," l'adresse IP DOIT \xeatre dans l'ordre inverse. Voir ",(0,r.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc1035#section-3.5"},"RFC 1035"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;A;1.2.3.4")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," avec la valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;AAAA;abcd::1234")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"AAAA")," avec la valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"abcd::1234"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;CNAME;example.org")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"CNAME"),". Voir l'explication ci-dessus.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;HTTPS;32 example.com alpn=h3")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTPS"),". Seul un sous-ensemble de valeurs de param\xe8tres est pris en charge : les valeurs doivent \xeatre ",(0,r.kt)("inlineCode",{parentName:"p"},"contigu\xebs \xe0")," et, lorsqu'une ",(0,r.kt)("inlineCode",{parentName:"p"},"liste de valeurs")," est ",(0,r.kt)("inlineCode",{parentName:"p"},"attendue"),", une seule valeur est actuellement prise en charge\xa0:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none"},'ipv4hint=127.0.0.1 // Pris en charge.\nipv4hint="127.0.0.1" // Non pris en charge.\nipv4hint=127.0.0.1,127.0.0.2   // Non pris en charge.\nipv4hint="127.0.0.1,127.0.0.2"  // Non pris en charge.\n')),(0,r.kt)("p",{parentName:"li"},"Cela changera \xe0 l\u2019avenir.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;MX;32 example.mail")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"MX")," avec la valeur de priorit\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"32")," et la valeur d'\xe9change ",(0,r.kt)("inlineCode",{parentName:"p"},"example.mail"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;SVCB;32 example.com alpn=h3")," ajoute une valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"SVCB"),". Voir l'exemple ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTPS")," ci-dessus.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NOERROR;TXT;hello_world")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"TXT")," avec la valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"hello_world"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||_svctype._tcp.example.com^$dnsrewrite=NOERROR;SRV;10 60 8080 example.com")," ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"SRV")," avec la valeur de priorit\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"10"),", la valeur de pond\xe9ration ",(0,r.kt)("inlineCode",{parentName:"p"},"60"),", le port",(0,r.kt)("inlineCode",{parentName:"p"},"8080"),"et la valeur cible ",(0,r.kt)("inlineCode",{parentName:"p"},"example.com"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com^$dnsrewrite=NXDOMAIN;;")," r\xe9pond par un code ",(0,r.kt)("inlineCode",{parentName:"p"},"NXDOMAIN"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"$dnstype=AAAA,denyallow=example.org,dnsrewrite=NOERROR\xa0;;")," fait retour avec des r\xe9ponses ",(0,r.kt)("inlineCode",{parentName:"p"},"NOERROR")," vides pour toutes requ\xeates ",(0,r.kt)("inlineCode",{parentName:"p"},"AAA")," sauf celles pour ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org"),"."))),(0,r.kt)("p",null,"Les r\xe8gles d'exception suppriment une ou toutes les r\xe8gles\xa0:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite")," supprime toutes les r\xe8gles de r\xe9\xe9criture DNS.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@||example.com^$dnsrewrite=1.2.3.4")," supprime la r\xe8gle de r\xe9\xe9criture DNS qui ajoute un enregistrement ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," avec la valeur ",(0,r.kt)("inlineCode",{parentName:"p"},"1.2.3.4"),"."))),(0,r.kt)("h4",{id:"important"},(0,r.kt)("inlineCode",{parentName:"h4"},"important")),(0,r.kt)("p",null,"Le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"important")," appliqu\xe9 \xe0 une r\xe8gle augmente sa priorit\xe9 sur toute autre r\xe8gle sans le modificateur. M\xeame sur les r\xe8gles d'exceptions de base."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Dans cet exemple\xa0:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||exemple.org^$important\n@@||exemple.org^\n")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$important")," bloquera toutes les requ\xeates vers ",(0,r.kt)("inlineCode",{parentName:"p"},"*.example.org")," malgr\xe9 la r\xe8gle d'exception.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Dans cet exemple\xa0:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-none"},"||example.org^$important\n@@||example.org^$important\n")),(0,r.kt)("p",{parentName:"li"},"la r\xe8gle d'exception comporte \xe9galement le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"important")," , donc \xe7a doit marcher."))),(0,r.kt)("h4",{id:"badfilter"},(0,r.kt)("inlineCode",{parentName:"h4"},"badfilter")),(0,r.kt)("p",null,"Les r\xe8gles avec le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"badfilter")," d\xe9sactivent les autres r\xe8gles de base auxquelles elles se r\xe9f\xe8rent. Cela signifie que le texte de la r\xe8gle d\xe9sactiv\xe9e doit correspondre au texte de la r\xe8gle ",(0,r.kt)("inlineCode",{parentName:"p"},"badfilter")," (sans le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"badfilter"),")."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.com$badfilter")," d\xe9sactive ",(0,r.kt)("inlineCode",{parentName:"p"},"||example.com"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@@||example.org^$badfilter")," d\xe9sactive ",(0,r.kt)("inlineCode",{parentName:"p"},"@@||example.org^"),"."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"REMARQUE :")," Le modificateur ",(0,r.kt)("inlineCode",{parentName:"p"},"badfilter")," ne fonctionne pas actuellement avec les r\xe8gles de style ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/hosts"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org$badfilter")," ne d\xe9sactivera ",(0,r.kt)("strong",{parentName:"p"},"pas")," la r\xe8gle d'origine ",(0,r.kt)("inlineCode",{parentName:"p"},"127.0.0.1 example.org"),"."))),(0,r.kt)("h4",{id:"ctag"},(0,r.kt)("inlineCode",{parentName:"h4"},"ctag")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Le modificateur ",(0,r.kt)("inlineCode",{parentName:"strong"},"ctag")," ne peut \xeatre utilis\xe9 que dans AdGuard Home.")),(0,r.kt)("p",null,"Il permet de bloquer des domaines uniquement pour des types sp\xe9cifiques de balises client DNS. Vous pouvez attribuer des balises aux clients dans l'interface utilisateur AdGuard Home. \xc0 l'avenir, nous pr\xe9voyons d'attribuer automatiquement des balises en analysant le comportement de chaque client."),(0,r.kt)("p",null,"La syntaxe est :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=value1|value2|...\n")),(0,r.kt)("p",null,"Si l'une des balises du client correspond aux valeurs ",(0,r.kt)("inlineCode",{parentName:"p"},"ctag")," , cette r\xe8gle s'applique au client. La syntaxe de l'exclusion est\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"$ctag=~value1|~value2|...\n")),(0,r.kt)("p",null,"Si l'une des balises du client correspond aux valeurs ",(0,r.kt)("inlineCode",{parentName:"p"},"ctag")," d'exclusion, cette r\xe8gle ne s'applique pas au client."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemples :")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=device_pc|device_phone"),": bloquer ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," pour les clients marqu\xe9s comme ",(0,r.kt)("inlineCode",{parentName:"p"},"device_pc")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"device_phone"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"||example.org^$ctag=~device_phone"),": bloquer ",(0,r.kt)("inlineCode",{parentName:"p"},"example.org")," pour tous les clients sauf ceux marqu\xe9s comme ",(0,r.kt)("inlineCode",{parentName:"p"},"device_phone"),"."))),(0,r.kt)("p",null,"La liste des balises autoris\xe9es\xa0:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Par type de dispositif :"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_audio")," : p\xe9riph\xe9riques audio."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_camera")," : cam\xe9ras."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_gameconsole")," : consoles de jeux."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_laptop")," : ordinateurs portables."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_nas")," : NAS (Stockages en r\xe9seau)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_pc")," : PCs."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_phone")," : t\xe9l\xe9phones."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_printer")," : imprimantes."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_securityalarm")," : alarmes de s\xe9curit\xe9."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_tablet")," : tablettes."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_tv")," : t\xe9l\xe9viseurs."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"device_other")," : autres appareils."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Par syst\xe8me d'exploitation\xa0:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_android"),": Android."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_ios"),": iOS."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_linux"),": Linux."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_macos"),": macOS."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_windows"),": Windows."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"os_other"),": autres syst\xe8mes d'exploitation."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Par groupe d'utilisateurs\xa0:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"user_admin"),": administrateurs."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"user_regular"),": utilisateurs r\xe9guliers."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"user_child"),": enfants.")))),(0,r.kt)("h2",{id:"etc-hosts-syntax"},(0,r.kt)("inlineCode",{parentName:"h2"},"/etc/hosts"),"-Style Syntaxe"),(0,r.kt)("p",null,"Pour chaque h\xf4te, une seule ligne doit \xeatre pr\xe9sente avec les informations suivantes\xa0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"IP_address canonical_hostname [aliases...]\n")),(0,r.kt)("p",null,"Les champs des entr\xe9es sont s\xe9par\xe9s par un nombre d'espaces ou de tabulations. Le texte commen\xe7ant par le caract\xe8re ",(0,r.kt)("inlineCode",{parentName:"p"},"#")," jusqu'\xe0 la fin de la ligne est un commentaire et est ignor\xe9."),(0,r.kt)("p",null,"Les noms d'h\xf4te ne peuvent contenir que des caract\xe8res alphanum\xe9riques, des signes tiret moins (",(0,r.kt)("inlineCode",{parentName:"p"},"-"),") et des points (",(0,r.kt)("inlineCode",{parentName:"p"},"."),"). Ils doivent commencer par un caract\xe8re alphab\xe9tique et se terminer par un caract\xe8re alphanum\xe9rique. Les alias facultatifs permettent des changements de nom, des orthographes alternatives, des noms d'h\xf4te plus courts ou des noms d'h\xf4te g\xe9n\xe9riques (par exemple, ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost"),")."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"# Ceci est un commentaire\n127.0.0.1 exemple.org example.info\n127.0.0.1 exemple.com\n127.0.0.1 exemple.net # ceci est aussi un commentaire\n")),(0,r.kt)("p",null,"Dans AdGuard Home, les adresses IP sont utilis\xe9es pour r\xe9pondre aux requ\xeates DNS pour ces domaines. Dans AdGuard DNS Priv\xe9, ces adresses sont tout simplement bloqu\xe9es."),(0,r.kt)("h2",{id:"syntaxe-pour-les-domaines-uniquement"},"Syntaxe pour les domaines uniquement"),(0,r.kt)("p",null,"Une simple liste de noms de domaine, un nom par ligne."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-none"},"# Ceci est un commentaire\nexemple.com\nexemple.org\nexemple.net # ceci est aussi un commentaire\n")),(0,r.kt)("p",null,"Si une cha\xeene n'est pas un domaine valide (par exemple ",(0,r.kt)("inlineCode",{parentName:"p"},"*.example.org"),"), AdGuard Home la consid\xe9rera comme une r\xe8gle du ",(0,r.kt)("a",{parentName:"p",href:"#adblock-style-syntax"}," style Adblock"),"."),(0,r.kt)("h2",{id:"compilateur-de-listes-dh\xf4tes"},"Compilateur de listes d'h\xf4tes"),(0,r.kt)("p",null,"Si vous maintenez une liste de blocage et vous utilisez des sources diff\xe9rentes, le ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/HostlistCompiler"},"Compilateur des listes d'h\xf4tes")," peut vous \xeatre utile. C'est un outil simple qui facilite la compilation d'une liste de blocage d'h\xf4tes compatible avec AdGuard Home, AdGuard DNS Priv\xe9 ou tout autre produit AdGuard comportant le filtrage DNS."),(0,r.kt)("p",null,"Qu'est-ce qu'il peut faire :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Compiler une liste de blocage \xe0 partir de plusieurs sources.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Exclure les r\xe8gles dont vous n'avez pas besoin.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Nettoyer la liste r\xe9sultante\xa0: d\xe9dupliquer, supprimer les r\xe8gles non valides et compresser la liste."))))}c.isMDXComponent=!0}}]);